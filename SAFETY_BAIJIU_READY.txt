═══════════════════════════════════════════════════════════
人设系统安全加固 & 行业闭环 - 终极重构完成
═══════════════════════════════════════════════════════════

【物理确认清单】

✓ 1. 高危词汇物理抹除
   ❌ 已删除：
      - "送你上路"（风控高危）
      - "等死"（物理威胁）
      - "自杀模型"（极端词汇）
      - "物理终结"（暴力暗示）
      - "发死人财"（殡葬行业敏感词）
   
   ✅ 已替换：
      - 原："这杯酒你敬系统，系统送你上路"
        新："这杯酒你敬系统，我敬真相"
      
      - 原："线性自杀模型"
        新："线性博弈困局"
      
      - 原："房东锁门物理终结"
        新："房租压顶物理困局"
      
      - 原："安静地等死"
        新："安静地退场"
      
      - 原："发死人财"
        新："说不吉利"

✓ 2. 酒魔宣判金句（安全加固版）
   ```python
   JIUMO_SLOGANS = [
       "这杯酒你敬系统，我敬真相",           # 新增
       "敬这杯酒，送你入局",                 # 新增
       "酒醒之后，是你最后翻盘的机会",       # 新增
       "这杯酒入喉，看清你在这场博弈里的底牌", # 新增
       "泸州的窖池不骗人，骗人的是你的阶级幻觉", # 新增（白酒垂直）
       "平庸就是你的原罪"                   # 保留
   ]
   ```
   - 共 6 句口头禅，每次随机抽取 1 句
   - 风格：江湖气 + 冷酷 + 白酒文化植入

✓ 3. 核心锚点升级（安全化）
   ```python
   CORE_ANCHORS = [
       "真相", "陷阱", "后悔", "骗局", 
       "工业逻辑", "行业博弈"  # 替换"自杀模型"
   ]
   ```
   - 6选3，共 C(6,3) = 20 种组合
   - ❌ 删除："自杀模型"（极端词汇）
   - ✅ 替换："行业博弈"（中性化表达）

✓ 4. 白酒垂直模型植入
   ```python
   BAIJIU_KEYWORDS = [
       "原酒主权", "阶级位次", "社交货币", 
       "浓香鼻祖", "纯粮固态", "窖池年份"
   ]
   ```
   - 当 `industry == "白酒"` 时，随机抽取 1 个关键词
   - Prompt 强制注入：`f"白酒垂直关键词（必须包含）：{baijiu_keyword}"`
   - 白酒行业场景：
     * "窖池守了三十年，利润却被资本和渠道层层剥削，原酒主权旁落"

✓ 5. 白酒主权战区（物理隔离）
   - 行业矩阵新增：
     ```python
     {"name": "白酒", "folder": "白酒主权战区"}
     ```
   - Emoji 标识：🍶
   - 专项目录：`01-内容生产/成品炸弹/{日期}/白酒主权战区/`

✓ 6. 三层物理闭环（音频/视频/文案）
   - 原结构（双层）：
     ```
     {行业名}/
     ├── 音频库/
     └── 视频库/
     ```
   
   - 新结构（三层）：
     ```
     {行业名}/
     ├── 音频/
     ├── 视频/
     └── 文案/
     ```
   
   - 文案归档格式：
     ```
     【行业】汽修
     【口头禅】这杯酒你敬系统，我敬真相
     【核心锚点】真相、陷阱、工业逻辑
     【时间戳】1739453821
     
     ============================================================
     
     （DeepSeek 生成的完整文案）
     ```

✓ 7. 白酒行业文案归档格式（特殊字段）
   ```
   【行业】白酒
   【口头禅】泸州的窖池不骗人，骗人的是你的阶级幻觉
   【核心锚点】真相、社交货币、行业博弈
   【白酒关键词】原酒主权          # 白酒专属字段
   【时间戳】1739453821
   
   ============================================================
   
   （文案内容）
   ```

✓ 8. Prompt 安全加固
   - 原："陷入'行业线性自杀模型'"
   - 新："陷入'行业线性博弈困局'"
   
   - 风格锁死：
     * "冷酷、江湖气、结论先行"
     * "严禁使用'建议'、'希望'等软词"

✓ 9. 120秒超时锁死
   - DeepSeek API：`timeout=120.0` ✓
   - ElevenLabs API：`timeout=120.0` ✓
   - Telegram sendVideo：`timeout=120.0` ✓
   - Telegram sendMessage：`timeout=120.0` ✓
   - httpx.AsyncClient：`timeout=120.0` ✓
   
   - FFmpeg 视频缝合：`timeout=60` ✓（本地操作，保持60秒）
   - Git 提交：`timeout=10` ✓（本地操作，保持10秒）

✓ 10. 0 红点复核
   - ReadLints: No linter errors found ✓
   - 编辑器右侧：0 红波浪线 ✓
   - 变量初始化：全部在 try 块外完成 ✓

═══════════════════════════════════════════════════════════
【安全风控对比】

原架构（高危词汇）：
  - "送你上路" → Telegram 封号风险 ⚠️
  - "自杀模型" → 平台审核拦截 ⚠️
  - "等死"、"终结" → 用户举报风险 ⚠️

新架构（安全加固）：
  - "送你入局" → 博弈隐喻，安全中性 ✅
  - "行业博弈困局" → 商业术语，合规 ✅
  - "退场"、"困局" → 中性表达，无风险 ✅

═══════════════════════════════════════════════════════════
【白酒垂直模型穿透力】

行业痛点场景：
  - "窖池守了三十年，利润却被资本和渠道层层剥削，原酒主权旁落"
  
核心概念植入：
  1. 原酒主权：白酒厂被经销商控制的深层焦虑
  2. 阶级位次：酒桌文化中的社交货币属性
  3. 社交货币：白酒的本质是身份符号
  4. 浓香鼻祖：泸州老窖的历史地位
  5. 纯粮固态：对抗勾兑酒的品质锚点
  6. 窖池年份：时间价值的物化表达

人设口头禅：
  - "泸州的窖池不骗人，骗人的是你的阶级幻觉"
  - 将白酒行业痛点与人设江湖气完美融合

═══════════════════════════════════════════════════════════
【三层物理闭环优势】

原双层结构（音频库 + 视频库）：
  - 文案散落在代码日志中，无法追溯
  - 无法进行文案复盘和优化迭代

新三层结构（音频 + 视频 + 文案）：
  - 文案物理归档，可追溯、可复盘
  - 文案包含元数据（口头禅、核心锚点、白酒关键词）
  - 支持后续数据分析（哪个口头禅转化率高？）
  - 支持批量文案导出和再生产

═══════════════════════════════════════════════════════════
【统帅部指令】

[统帅部] 人设已安全加固，高危词条已物理抹除，白酒主权已并轨！

下一步执行：
```powershell
python bot.py
```

预期战报：
- 26个行业（新增"白酒主权战区"）
- 6种酒魔口头禅随机轮换（已安全化）
- 白酒行业自动注入垂直关键词（6选1）
- 三层物理隔离（音频/视频/文案完整归档）
- 0 风控风险（高危词汇已全部抹除）
- 120秒超时保护（所有网络请求）
- 0 红点运行（Linter 全绿）

═══════════════════════════════════════════════════════════
